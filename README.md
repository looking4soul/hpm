# hpm
Note of High Performance MySQL

## 可扩展性

可扩展性是指能够通过增加资源来提升系统能力的能力。

系统能力指系统处理负载的能力，这些负载可能是数据量、用户量、用户活跃度、相关数据集大小、每秒请求数（吞吐量）。

最常用的指标是吞吐量，准确说是在可接受的性能的情况下系统能够达到的吞吐量。

可扩展性可用资源投入到能力产出的投资回报率来衡量（ROI）。好的扩展性就是线性的ROI曲线或超线性的ROI曲线，但实际情况一般是有线性偏差的低于线性的曲线。

Neil J. Gunther的USL（Universal Scalability Law)通用可扩展性定律表明，线性扩展的偏差和两个因素有关：串行和交互（通信）。因此，为了达到高可扩展性，应该在系统内尽量避免串行和交互。


## 可用性

直观概念：5个9（99.999%）等于每年允许5分钟怠机时间。

### 怠机原因

运行环境（35%）：比如操作系统、网络、硬盘。最常见原因是磁盘空间耗尽。

性能（35%）：糟糕的SQL语句、schema、索引。

复制（20%）：数据不一致。

数据丢失（10%）：如果不能容忍数据丢失，也是一种不可用。通常原因是drop table误操作，加上没有备份。

### 避免怠机

采用全面的常识性的系统管理办法。和研发人员相关的有：

- 避免使用复杂的特性。比如触发器，复制过滤等，除非确实需要。
- 审查SQL语句、schema、索引。




